{"version":3,"file":"otab.js","sources":["../src/o-tab.js"],"sourcesContent":["/**\n * ------------------------------------------------------------------------------------------------------\n * Boosted (v4.3.1): otab.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * ------------------------------------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'otab'\nconst VERSION             = '4.3.1'\nconst DATA_KEY            = 'bs.otab'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\nconst DEFAULT_THRESHOLD   = 2\n\nconst Event = {\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  ACTIVE        : 'active',\n  SHOW          : 'show',\n  ACCORDION_LAYOUT: 'accordion-layout'\n}\n\nconst Selector = {\n  OTAB_HEADING: '.o-tab-heading',\n  OTAB_CONTENT: '.o-tab-content'\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Otab {\n  constructor(element) {\n    this._element = element\n    this._addAccessibility()\n\n    if ($(this._element).parent().find(Selector.OTAB_HEADING).length > DEFAULT_THRESHOLD) {\n      $(this._element).parent().addClass(ClassName.ACCORDION_LAYOUT)\n    }\n  }\n\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n\n  // public\n  show() {\n    const $element = $(this._element)\n\n    if ($element.next().hasClass(ClassName.SHOW)) {\n      return\n    }\n\n    // from parent remove all tab-content show classes\n    $element.parent().find(Selector.OTAB_CONTENT).removeClass(ClassName.SHOW)\n    // remove all aria-expanded=true\n    $element.parent().find('[aria-expanded=\"true\"]').attr('aria-expanded', false)\n    // add show class to next tab-content\n    $element.next().addClass(ClassName.SHOW)\n    // add aria-expanded=true to element\n    $element.attr('aria-expanded', true)\n  }\n\n  // private\n  _addAccessibility() {\n    const $tab = $(this._element)\n    const $tabpanel = $tab.next()\n\n    $tab.attr('id', Util.getUID(NAME))\n    $tabpanel.attr('id', Util.getUID(NAME))\n\n    $tab.attr({\n      'aria-controls': $tabpanel.attr('id'),\n      role: 'tab'\n    })\n    $tabpanel.attr({\n      'aria-labelledby': $tab.attr('id'),\n      role: 'tabpanel',\n      tabindex: 0\n    })\n\n    if ($tabpanel.hasClass(ClassName.SHOW)) {\n      $tab.attr('aria-expanded', true)\n    } else {\n      $tab.attr('aria-expanded', false)\n    }\n  }\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $this = $(this)\n      let data    = $this.data(DATA_KEY)\n\n      if (!data) {\n        data = new Otab(this)\n        $this.data(DATA_KEY, data)\n      }\n\n      // Boosted mod\n      if (/init/.test(config)) {\n        return\n      }\n      // end mod\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on('DOMContentLoaded', () => {\n    Otab._jQueryInterface.call($(Selector.OTAB_HEADING), 'init')\n  })\n  .on(Event.CLICK_DATA_API, Selector.OTAB_HEADING, function (event) {\n    event.preventDefault()\n    Otab._jQueryInterface.call($(this), ClassName.SHOW)\n  })\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = Otab._jQueryInterface\n$.fn[NAME].Constructor = Otab\n$.fn[NAME].noConflict  = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Otab._jQueryInterface\n}\n\nexport default Otab\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","DEFAULT_THRESHOLD","Event","CLICK_DATA_API","ClassName","ACTIVE","SHOW","ACCORDION_LAYOUT","Selector","OTAB_HEADING","OTAB_CONTENT","Otab","element","_element","_addAccessibility","parent","find","length","addClass","show","$element","next","hasClass","removeClass","attr","$tab","$tabpanel","Util","getUID","role","tabindex","_jQueryInterface","config","each","$this","data","test","TypeError","document","on","call","event","preventDefault","Constructor","noConflict"],"mappings":"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"}